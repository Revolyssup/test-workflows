name: user
vars:
  controlplaneNS: istio-system
  namespace: default
  istioVersion: 1.12.0
  profile: minimal
services:
  istioservicemesh:
    type: IstioMesh
    namespace:  $(#ref.vars.controlplaneNS)
    settings:
      version: $(#ref.vars.istioVersion)
      profile: $(#ref.vars.profile)
    traits:
      automaticSidecarInjection:
        namespaces:
          - $(#ref.vars.sidecarNS)
  # addons:
  #   type: $(#use https://raw.githubusercontent.com/Revolyssup/test-workflows/main/pattern/addons.yaml)
  #   settings: 
  #     controlplaneNS: istio-system
  #   dependsOn:
  #     - istioservicemesh
