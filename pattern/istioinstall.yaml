name: user
vars:
  controlplaneNS: {}
  sidecarNS: {}
  istioVersion: {}
services:
  istioservicemesh:
    type: IstioMesh
    namespace:  $(#ref.vars.controlplaneNS)
    settings:
      version: $(#ref.vars.istioVersion)
    traits:
      automaticSidecarInjection:
        namespaces:
          - $(#ref.vars.sidecarNS)
  grafana:
    type: GrafanaIstioAddon
    namespace: $(#ref.vars.controlplaneNS)
    dependsOn:
      - prometheus
      - istioservicemesh
  prometheus:
    type: PrometheusIstioAddon
    namespace: $(#ref.vars.controlplaneNS)
    dependsOn:
      - istioservicemesh
