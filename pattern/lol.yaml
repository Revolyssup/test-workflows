name: istio
vars:
  controlplaneNS: istio-system
  istioVersion: 1.12.0
  namespace: default
  sidecarNS: default
services:
  bookinfo-vs8c57d047c3497d0a:
    name: bookinfo-vs8c57d047c3497d0a
    type: VirtualService.Istio
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    settings:
      gateways:
      - sample-app-gateway
      hosts:
      - bookinfo.meshery.io
      http:
      - fault:
          delay:
            fixedDelay: 7s
            percentage:
              value: 100
        match:
        - uri:
            exact: /productpage
        - uri:
            prefix: /static
        - uri:
            exact: /login
        - uri:
            exact: /logout
        - uri:
            prefix: /api/v1/products
        route:
        - destination:
            host: productpage
            port:
              number: 9080
      name: bookinfo-vs
      namespace: $(#ref.vars.namespace)
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.sample-app-gateway.id)
          to: $(#ref.services.bookinfo-vs.id)
        - from: $(#ref.services.bookinfo-vs.id)
          to: $(#ref.services.productpage.id)
        position:
          posX: 183.00511692929953
          posY: 320.00211735005496
  details73de2529:
    name: details73de2529
    type: Application
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    settings:
      advanced:
        labels:
          version: v1
      containers:
      - image: docker.io/istio/examples-bookinfo-details-v1:1.16.2
        name: details
        ports:
        - containerPort: 9080
          name: http
      name: details
      namespace: $(#ref.vars.namespace)
      replicas: 1
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.productpage.id)
          to: $(#ref.services.details.id)
        position:
          posX: 414.45747658153505
          posY: 388.85606569789246
  grafana32e685eb182327e1:
    name: grafana32e685eb182327e1
    type: GrafanaIstioAddon
    namespace: $(#ref.vars.controlplaneNS)
  istioservicemesh07e8493a0acd978f:
    name: istioservicemesh07e8493a0acd978f
    type: IstioMesh
    namespace: $(#ref.vars.controlplaneNS)
    settings:
      version: $(#ref.vars.istioVersion)
    traits:
      automaticSidecarInjection:
        namespaces:
        - $(#ref.vars.sidecarNS)
  productpage6038bed7:
    name: productpage6038bed7
    type: Application
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    settings:
      advanced:
        labels:
          version: v1
      containers:
      - image: docker.io/istio/examples-bookinfo-productpage-v1:1.16.2
        name: productpage
        ports:
        - containerPort: 9080
          name: http
      name: productpage
      namespace: $(#ref.vars.namespace)
      replicas: 1
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.bookinfo-vs.id)
          to: $(#ref.services.productpage.id)
        - from: $(#ref.services.productpage.id)
          to: $(#ref.services.reviews.id)
        - from: $(#ref.services.productpage.id)
          to: $(#ref.services.details.id)
        position:
          posX: 281.0063520501649
          posY: 320.0015880125412
  prometheus954a7965:
    name: prometheus954a7965
    type: PrometheusIstioAddon
    namespace: $(#ref.vars.controlplaneNS)
  ratings8229a44f:
    name: ratings8229a44f
    type: Application
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    settings:
      advanced:
        labels:
          version: v1
      containers:
      - image: docker.io/istio/examples-bookinfo-ratings-v1:1.16.2
        name: ratings
        ports:
        - containerPort: 9080
          name: http
      name: ratings
      namespace: $(#ref.vars.namespace)
      replicas: 1
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.reviews-v3.id)
          to: $(#ref.services.ratings.id)
        position:
          posX: 649
          posY: 391
  reviews-v2077e4c27:
    name: reviews-v2077e4c27
    type: Application
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    settings:
      advanced:
        create_service: false
        labels:
          custom.app: reviews
          version: v2
      containers:
      - image: docker.io/istio/examples-bookinfo-reviews-v2:1.16.2
        name: reviews
        ports:
        - containerPort: 9080
          name: http
      name: reviews-v2
      namespace: $(#ref.vars.namespace)
      replicas: 1
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.reviews.id)
          to: $(#ref.services.reviews-v2.id)
        parent: d29c1858-d417-40bf-88fa-a8220adefd4d
        position:
          posX: 536.3224484379678
          posY: 205.00335247092036
  reviews-v148138ab7:
    name: reviews-v148138ab7
    type: Application
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    settings:
      advanced:
        create_service: false
        labels:
          custom.app: reviews
          version: v1
      containers:
      - image: docker.io/istio/examples-bookinfo-reviews-v1:1.16.2
        name: reviews
        ports:
        - containerPort: 9080
          name: http
      name: reviews-v1
      namespace: $(#ref.vars.namespace)
      replicas: 1
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.reviews.id)
          to: $(#ref.services.reviews-v1.id)
        parent: d29c1858-d417-40bf-88fa-a8220adefd4d
        position:
          posX: 534.1172892338158
          posY: 147.36074939087763
  reviews-v37926254af23d6385:
    name: reviews-v37926254af23d6385
    type: Application
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    - grafana32e685eb182327e1
    - prometheus954a7965
    - grafana32e685eb182327e1
    settings:
      advanced:
        create_service: false
        labels:
          custom.app: reviews
          version: v3
      containers:
      - image: docker.io/istio/examples-bookinfo-reviews-v3:1.16.2
        name: reviews
        ports:
        - containerPort: 9080
          name: http
      name: reviews-v3
      namespace: $(#ref.vars.namespace)
      replicas: 1
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.reviews-v3.id)
          to: $(#ref.services.ratings.id)
        - from: $(#ref.services.reviews.id)
          to: $(#ref.services.reviews-v3.id)
        parent: d29c1858-d417-40bf-88fa-a8220adefd4d
        position:
          posX: 537.5467581185748
          posY: 268.69329017003173
  reviews250d3356:
    name: reviews250d3356
    type: Service.K8s
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    settings:
      name: reviews
      namespace: $(#ref.vars.namespace)
      spec:
        ports:
        - name: http
          port: 9080
        selector:
          custom.app: reviews
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.productpage.id)
          to: $(#ref.services.reviews.id)
        - from: $(#ref.services.reviews.id)
          to: $(#ref.services.reviews-v2.id)
        - from: $(#ref.services.reviews.id)
          to: $(#ref.services.reviews-v3.id)
        - from: $(#ref.services.reviews.id)
          to: $(#ref.services.reviews-v1.id)
        position:
          posX: 400.9957488157415
          posY: 193.99797562654356
  sample-app-gateway3845e1f6:
    name: sample-app-gateway3845e1f6
    type: Gateway.Istio
    namespace: $(#ref.vars.namespace)
    dependsOn:
    - istioservicemesh07e8493a0acd978f
    settings:
      name: sample-app-gateway
      namespace: $(#ref.vars.namespace)
      selector:
        istio: ingressgateway
      servers:
      - hosts:
        - '*'
        port:
          name: http
          number: 80
          protocol: HTTP
    traits:
      meshmap:
        edges:
        - from: $(#ref.services.sample-app-gateway.id)
          to: $(#ref.services.bookinfo-vs.id)
        position:
          posX: 123
          posY: 320
